<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="author" content="智能社 - zhinengshe.com" />
<meta name="copyright" content="智能社 - zhinengshe.com" />
<title>智能社 - www.zhinengshe.com</title>
<style>
*{margin:0;padding:0; list-style:none;}
#box{ position:relative;width:400px; height:600px; overflow:hidden; border:1px solid #000;  margin:20px auto;}
#scroll{ position:absolute;right:0;top:20px; width:20px; height:560px;;   background:#ccc;}
#bar{ position:absolute;left:0;top:0;width:100%; height:50px; background:green}
#prev{position:absolute;left:0;top:-20px;width:100%; height:20px;background:red; text-align:center;}
#next{position:absolute;left:0;bottom:-20px;width:100%; background:red;height:20px; text-align:center;}
#content{ position:relative;width:380px; height:100%; background:yellow;overflow:hidden}
#wrap{ position:absolute;left:0;top:0;width:100%; overflow:hidden;}
</style>
<script src="addReady.js"></script>
<script src="addMouseWheel.js"></script>
<script>

$(function(){
	
	var oBox = document.getElementById("box");
	var oScroll = document.getElementById("scroll");
	var oPrev = document.getElementById("prev");
	var oNext = document.getElementById("next");
	var oBar  = document.getElementById("bar");
	var oCon  = document.getElementById("content");
	var oWrap = document.getElementById("wrap");
	
	
	autoHeight();
	
	function autoHeight(){
		if(oCon.offsetHeight >= oWrap.offsetHeight){
			oScroll.style.display = "none";
		} else {
			oScroll.style.display = "block";
			/*
			 oBar.H  ↓     oCon.H 
			----------  = --------     变小
			oScroll.H      oWrap.H ↑
			
			*/
			var h = oCon.offsetHeight/oWrap.offsetHeight * oScroll.offsetHeight;
			
			if(h < 50){
				h = 50;
			}
			oBar.style.height = h + "px";
		}
	}
	var timer=null;
	
	oPrev.onmousedown = function(){
		clearInterval(timer);
		timer=setInterval(function(){
			setTop(oBar.offsetTop - 10);
			
		},30);
			
	};
	
	oPrev.onmouseup=oNext.onmouseup=function(){
		clearInterval(timer);
	};
	oNext.onmousedown = function(){
		clearInterval(timer);
		timer=setInterval(function(){
			setTop(oBar.offsetTop + 10);	
		},30);
	};
	
	
	
	addMouseWheel(oBox,function(bDown){
		var t = oBar.offsetTop;
		
		if(bDown){
			t += 10;
		} else {
			t -= 10;
		}
		setTop(t);
	});
	
	
	
	oBar.onmousedown = function(ev){
		var oEvent = ev || event;
		var disY = oEvent.clientY - oBar.offsetTop;
		
		document.onmousemove = function(ev){
			var oEvent = ev || event;
			var t = oEvent.clientY - disY;
			
			setTop(t);
		};
		
		
		document.onmouseup = function(){
			document.onmousemove = null;
			document.onmouseup = null;
			
			oBar.releaseCapture && oBar.releaseCapture();
		};
		
		
		oBar.setCapture && oBar.setCapture();
		return false;	
	};
	
	function setTop(t){
		var maxH = oScroll.offsetHeight - oBar.offsetHeight;
		if(t < 0){
			t = 0;
		} else if(t > maxH){
			t = maxH;
		}
		
		var scale = t/maxH;
		
		oWrap.style.top = -scale*(oWrap.offsetHeight - oCon.offsetHeight) + "px";
		oBar.style.top = t + "px";
	}
		
});

</script>
</head>

<body>

<div id="box">
	<div id="scroll">
    	<a href="javascript:;" id="prev">↑</a>
    	<a href="javascript:;" id="next">↓</a>
        <div id="bar"></div>
    </div>
    <div id="content">
    	<div id="wrap">
        
        <p>他强调，要教育引导各级领导干部自觉用&ldquo;四个全面&rdquo;战略布局统一思想，正确把握改革大局，从改革大局出发看待利益关系调整，只要对全局改革有利、对党和国家事业发展有利、对本系统本领域形成完善的体制机制有利，都要自觉服从改革大局、服务改革大局，勇于自我革命，敢于直面问题，共同把全面深化改革这篇大文章做好。</p>
        
        <p>他强调，要教育引导各级领导干部自觉用&ldquo;四个全面&rdquo;战略布局统一思想，正确把握改革大局，从改革大局出发看待利益关系调整，只要对全局改革有利、对党和国家事业发展有利、对本系统本领域形成完善的体制机制有利，都要自觉服从改革大局、服务改革大局，勇于自我革命，敢于直面问题，共同把全面深化改革这篇大文章做好。</p>
        
        <p>他强调，要教育引导各级领导干部自觉用&ldquo;四个全面&rdquo;战略布局统一思想，正确把握改革大局，从改革大局出发看待利益关系调整，只要对全局改革有利、对党和国家事业发展有利、对本系统本领域形成完善的体制机制有利，都要自觉服从改革大局、服务改革大局，勇于自我革命，敢于直面问题，共同把全面深化改革这篇大文章做好。</p>
        
        <p>他强调，要教育引导各级领导干部自觉用&ldquo;四个全面&rdquo;战略布局统一思想，正确把握改革大局，从改革大局出发看待利益关系调整，只要对全局改革有利、对党和国家事业发展有利、对本系统本领域形成完善的体制机制有利，都要自觉服从改革大局、服务改革大局，勇于自我革命，敢于直面问题，共同把全面深化改革这篇大文章做好。</p>
        
        <p>他强调，要教育引导各级领导干部自觉用&ldquo;四个全面&rdquo;战略布局统一思想，正确把握改革大局，从改革大局出发看待利益关系调整，只要对全局改革有利、对党和国家事业发展有利、对本系统本领域形成完善的体制机制有利，都要自觉服从改革大局、服务改革大局，勇于自我革命，敢于直面问题，共同把全面深化改革这篇大文章做好。</p>
        
        <p>他强调，要教育引导各级领导干部自觉用&ldquo;四个全面&rdquo;战略布局统一思想，正确把握改革大局，从改革大局出发看待利益关系调整，只要对全局改革有利、对党和国家事业发展有利、对本系统本领域形成完善的体制机制有利，都要自觉服从改革大局、服务改革大局，勇于自我革命，敢于直面问题，共同把全面深化改革这篇大文章做好。</p>
        
        <p>他强调，要教育引导各级领导干部自觉用&ldquo;四个全面&rdquo;战略布局统一思想，正确把握改革大局，从改革大局出发看待利益关系调整，只要对全局改革有利、对党和国家事业发展有利、对本系统本领域形成完善的体制机制有利，都要自觉服从改革大局、服务改革大局，勇于自我革命，敢于直面问题，共同把全面深化改革这篇大文章做好。</p>
        
        <p>他强调，要教育引导各级领导干部自觉用&ldquo;四个全面&rdquo;战略布局统一思想，正确把握改革大局，从改革大局出发看待利益关系调整，只要对全局改革有利、对党和国家事业发展有利、对本系统本领域形成完善的体制机制有利，都要自觉服从改革大局、服务改革大局，勇于自我革命，敢于直面问题，共同把全面深化改革这篇大文章做好。</p>
        
        <p>他强调，要教育引导各级领导干部自觉用&ldquo;四个全面&rdquo;战略布局统一思想，正确把握改革大局，从改革大局出发看待利益关系调整，只要对全局改革有利、对党和国家事业发展有利、对本系统本领域形成完善的体制机制有利，都要自觉服从改革大局、服务改革大局，勇于自我革命，敢于直面问题，共同把全面深化改革这篇大文章做好。</p>
        
        <p>他强调，要教育引导各级领导干部自觉用&ldquo;四个全面&rdquo;战略布局统一思想，正确把握改革大局，从改革大局出发看待利益关系调整，只要对全局改革有利、对党和国家事业发展有利、对本系统本领域形成完善的体制机制有利，都要自觉服从改革大局、服务改革大局，勇于自我革命，敢于直面问题，共同把全面深化改革这篇大文章做好。</p>
        
        <p>他强调，要教育引导各级领导干部自觉用&ldquo;四个全面&rdquo;战略布局统一思想，正确把握改革大局，从改革大局出发看待利益关系调整，只要对全局改革有利、对党和国家事业发展有利、对本系统本领域形成完善的体制机制有利，都要自觉服从改革大局、服务改革大局，勇于自我革命，敢于直面问题，共同把全面深化改革这篇大文章做好。</p>
        
        <p>他强调，要教育引导各级领导干部自觉用&ldquo;四个全面&rdquo;战略布局统一思想，正确把握改革大局，从改革大局出发看待利益关系调整，只要对全局改革有利、对党和国家事业发展有利、对本系统本领域形成完善的体制机制有利，都要自觉服从改革大局、服务改革大局，勇于自我革命，敢于直面问题，共同把全面深化改革这篇大文章做好。</p>
        
        <p>他强调，要教育引导各级领导干部自觉用&ldquo;四个全面&rdquo;战略布局统一思想，正确把握改革大局，从改革大局出发看待利益关系调整，只要对全局改革有利、对党和国家事业发展有利、对本系统本领域形成完善的体制机制有利，都要自觉服从改革大局、服务改革大局，勇于自我革命，敢于直面问题，共同把全面深化改革这篇大文章做好。</p>


        
        </div>
    </div>


</div>

</body>
</html>
