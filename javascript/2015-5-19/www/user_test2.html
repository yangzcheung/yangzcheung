<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>用户注册ajax接口测试 - 智能社 - www.zhinengshe.com</title>
<link type="text/css" rel="stylesheet" href="style/common.css">
<script src="ajax.js"></script>
<script>
window.onload=function ()
{
	//user.php?act=xxx&user=用户名&pass=密码
	
	//注册：user.php?act=add&user=用户名&pass=密码
	var oTxtAddUser=document.getElementById('add_user');
	var oTxtAddPass=document.getElementById('add_pass');
	var oBtnAdd=document.getElementById('add_btn');
	
	oBtnAdd.onclick=function ()
	{
		//1.拼url——按照后台的要求
		var url='user.php?act=add&user='+oTxtAddUser.value+'&pass='+oTxtAddPass.value+'&t='+Math.random();
		
		//2.请求
		ajax(url, function (str){
			var json=eval('('+str+')');
			
			if(json.error==0)
			{
				alert('注册成功');
			}
			else
			{
				alert('注册失败：'+json.desc);
			}
		}, function (){
			alert('注册失败，稍后重试');
		});
	};
	
	//登录：user.php?act=login&user=用户名&pass=密码
	var oTxtLoginUser=document.getElementById('login_user');
	var oTxtLoginPass=document.getElementById('login_pass');
	var oBtnLogin=document.getElementById('login_btn');
	
	oBtnLogin.onclick=function ()
	{
		//1.拼URL——别动脑子
		var url='user.php?act=login&user='+oTxtLoginUser.value+'&pass='+oTxtLoginPass.value+'&t='+Math.random();
		
		//2.ajax请求
		ajax(url, function (str){
			var json=eval('('+str+')');
			
			if(json.error==0)
			{
				alert('登录成功');
			}
			else
			{
				alert('失败：'+json.desc);
			}
		}, function (){
			alert('登录失败，稍后重试');
		});
	};
};
</script>
</head>

<body>
<!--登陆-->
<div class="loginBox">
	<ul class="loginList clearfix">
    	<li class="hTxt">用户注册</li>
        <li class="inputBox">
        	<input type="text" class="inputs" id="add_user">
        </li>
        <li class="inputBox">
        	<input type="password" class="inputs" id="add_pass">
        </li>
        <li class="btns">
            <input id="add_btn" type="button" class="reg" value="" />
        </li>
        <li class="look"><a href="user_view.php" target="_blank">查看已注册用户</a></li>
    </ul>
</div>
<!--注册-->
<div class="loginBox">
	<ul class="loginList clearfix">
    	<li class="hTxt">用户登陆</li>
        <li class="inputBox">
        	<input type="text" class="inputs" id="login_user">
        </li>
        <li class="inputBox">
        	<input type="password" class="inputs" id="login_pass">
        </li>
        <li class="btns">
            <input id="login_btn" type="button" class="login" value="" />
        </li>
    </ul>
</div>
</body>
</html>
